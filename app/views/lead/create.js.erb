// $("#form_button").html('Received').css('color', 'white').css('background', 'rgba(154,59,59,1)').fadeIn();
// $("#form_button").attr('disabled',true);
<% if @error == "Email is invalid" %>
  $(".canvas").hide();
  $(".modal_text").text("Please key in a valid email").show();
<% else %>
  $(".canvas").attr("height","200").show();
var start = 120;
var mid = 138;
var end = 180;
var width = 9;
var leftX = start;
var leftY = start + 30;
var rightX = mid + 0.5;
var rightY = mid + 30 - 1.5;
var animationSpeed = 20;
var ctx = $('.canvas')[0].getContext('2d');
ctx.lineWidth = width;
ctx.strokeStyle = 'rgba(0, 150, 0, 1)';
for (i = start; i < mid; i++) {
    var drawLeft = window.setTimeout(function () {
        ctx.beginPath();
        ctx.moveTo(start, start + 30);
        ctx.lineTo(leftX, leftY);
        ctx.lineCap = 'round';
        ctx.stroke();
        leftX++;
        leftY++;
    }, 1 + (i * animationSpeed) / 3);
}
for (i = mid; i < end; i++) {
    var drawRight = window.setTimeout(function () {
        ctx.beginPath();
        ctx.moveTo(leftX + 2, leftY - 3);
        ctx.lineTo(rightX, rightY);
        ctx.stroke();
        rightX++;
        rightY--;
    }, 1 + (i * animationSpeed) / 3);
}

  $(".modal_text").text("You are now in our invite list! Fill in this survey form to receive exclusive deals when we launch!").show();
  $(".google_form").show();
<% end %>

